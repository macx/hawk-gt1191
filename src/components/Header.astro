---
import Navigation from './Navigation.astro'
import { Icon } from 'astro-icon/components'
import ThemeSwitch from './ThemeSwitch.astro'

const { siteLinks } = Astro.props
---

<a href='#main' class='sr-only'>Zum Hauptinhalt springen</a>

<header class='header'>
  <a href='/' class='brand' aria-label='Zur Startseite'>
    <svg viewBox='0 0 244.18 34.5' aria-labelby='logo'>
      <title>HAWK GT1191</title>
      <path
        class='brand-hawk'
        d='M5.36 18.74H18V34.5h5.35V0H18v13.79H5.36V0H0v34.5h5.36V18.74zM34.5 0l-9.64 34.5h5.84l3.58-12.86h8.33l-1.17-4.92h-5.79L40.34 0H34.5zM40.82 0l8.32 34.5h5.84l6.57-27.96 6.56 27.96h5.84L82.27 0h-5.83l-5.48 27.66L64.46 0h-5.83l-6.49 27.66L46.67 0h-5.85zM81.74 16.73 92.43 34.5h6.33l-10.7-17.76L98.52 0h-6.33L81.74 16.73z'
      ></path>
      <path class='brand-shape' d='M95.43 17.25 105.94 34.5h132.24V0H105'
      ></path>
      <path
        class='brand-shape-label'
        d='M125.52 17c0 2.48.13 5.42.17 7.47-5.22.1-7.08-2.61-7.08-7.53 0-4.18 1.3-7.08 9.59-6.75l-.2-3.56c-10.08.29-13.18 5.05-13.18 11 0 7.24 4.57 11.41 14.22 9.29v-9.85ZM132.31 10.05h5.94v17.09h3.78V10.05h5.77V6.92h-15.23l-.26 3.13zM168.03 6.27l-3.49.29v2.38l-5.03.53.07 2.64 4.96-.13v12.13h-5.48v3.03h13.57l.29-3.03h-4.89V6.27zM185.97 6.27l-3.49.29v2.38l-5.02.53.06 2.64 4.96-.13v12.13H177v3.03h13.57l.29-3.03h-4.89V6.27zM201.36 6.53a6.81 6.81 0 0 0-7.11 7c0 5.44 5.71 7.47 10.31 4.17-.75 2.87-2.94 5.09-8.12 7.18l1.5 3c7.14-3.23 10.34-7.76 10.34-13.4 0-5.21-2.81-7.95-6.92-7.95Zm3.53 8.94c-3.85 2.38-7.28 1.3-7.28-2.35 0-2.41 1.47-3.72 3.4-3.72 2.21 0 3.88 1.66 3.88 5.42ZM221.85 24.11V6.27l-3.49.29v2.38l-5.02.53.06 2.64 4.96-.13v12.13h-5.48v3.03h13.57l.29-3.03h-4.89z'
      ></path>
      <span id='logo' class='sr-only'>Startseite</span>
    </svg>
  </a>

  <Navigation siteLinks={siteLinks} />

  <div class='navigation-toggle'>
    <button
      type='button'
      class='header-button menu show js-toggle-nav'
      aria-label='Navigation öffnen'
    >
      <Icon name='material-symbols:menu' />
    </button>

    <button
      type='button'
      class='header-button menu hide js-toggle-nav'
      aria-label='Navigation schließen'
    >
      <Icon name='material-symbols:close' />
    </button>
  </div>

  <nav
    class='nav-complementary'
    role='navigation'
    aria-role='complementary'
    aria-label='Weiterführende Links'
  >
    <ul class='header-links'>
      <li class='external'>
        <a
          href={siteLinks.discord}
          target='_blank'
          rel='noopener'
          class='header-button'
        >
          <Icon name='simple-icons:discord' aira-hidden='true' />
          <span class='sr-only'>Discord</span>
        </a>
      </li>
      <li class='external'>
        <a
          href={siteLinks.studip}
          target='_blank'
          rel='noopener'
          class='header-button'
          aria-label='Stud-IP - Studentische Informationsplattform'
        >
          <Icon name='studip' aira-hidden='true' />
          <span class='sr-only'>StudIP</span>
        </a>
      </li>
      <li class='external'>
        <a
          href={siteLinks.github}
          target='_blank'
          rel='noopener'
          class='header-button'
        >
          <Icon name='simple-icons:github' aira-hidden='true' />
          <span class='sr-only'>GitHub</span>
        </a>
      </li>
      <li>
        <ThemeSwitch />
      </li>
    </ul>
  </nav>
</header>

<style lang='scss'>
  @use '../styles/base/mixins';

  .header {
    position: fixed;
    inset-block: 0 auto;
    inset-inline: 0;
    z-index: 20;

    display: flex;
    align-items: center;
    justify-content: space-between;

    height: var(--header-height);
    padding-inline: var(--sp-content);

    background-color: var(--clr-bg);
    border-bottom: 1px solid var(--nav-border);
    box-shadow: 1.5rem 0 4rem -0.5rem var(--nav-shadow);
    transition: all var(--transition-theme);

    @include mixins.respond('l') {
      justify-content: flex-start;
    }
  }

  .nav-complementary {
    display: none;

    @include mixins.respond('l') {
      display: block;
      margin-inline-start: auto;
    }
  }

  .header-links {
    justify-content: flex-end;
    align-items: stretch;
    margin-block: 0;
    padding-inline-start: 0;

    li {
      list-style: none;
    }

    @include mixins.respond('l') {
      display: flex;
      flex: 0 1 auto;
    }
  }

  .header-button {
    all: unset;

    display: grid;
    place-items: center;

    padding-inline: var(--sp-xs);
    block-size: var(--header-height);
    cursor: pointer;
    transition: background-color var(--transition);

    svg {
      display: block;
      inline-size: var(--icon-size-header);
      block-size: var(--icon-size-header);
      fill: var(--clr-text);
      transition: fill var(--transition);
    }

    &.menu svg {
      inline-size: var(--icon-size);
      block-size: var(--icon-size);
    }

    &.hide {
      display: none;
    }

    :global(.with-nav) & {
      &.show {
        display: none;
      }

      &.hide {
        display: grid;
      }
    }

    .navigation-toggle & {
      margin-inline-end: calc((var(--sp-content) / 2) * -1);
    }

    &:hover,
    &:focus-visible {
      background-color: var(--clr-primary--hover);
      text-decoration: none;
      color: var(--clr-primary);

      &::before {
        opacity: 1;
        transform: translate(-50%, -50%);
        z-index: 2;
      }
    }

    &:focus-visible {
      @include mixins.focus();
    }

    @include mixins.respond('l') {
      &.show,
      &.hide {
        display: none !important;
      }
    }
  }

  .brand {
    display: block;

    svg {
      display: block;
      height: 1.25rem;
      width: auto;
    }

    .brand-hawk,
    .brand-shape,
    .brand-shape-label {
      transition: fill var(--transition-theme);
    }

    .brand-hawk {
      fill: #15232d;
    }

    .brand-shape {
      fill-rule: evenodd;
      fill: #004fcd;
    }

    .brand-shape-label {
      fill: #fff;
    }

    @media (prefers-color-scheme: dark) {
      .brand-hawk {
        fill: #fff;
      }
    }

    :global(html[data-theme='dark']) & .brand-hawk {
      fill: #fff;
    }

    :global(html[data-theme='light']) & .brand-hawk {
      fill: #15232d;
    }
  }
</style>
